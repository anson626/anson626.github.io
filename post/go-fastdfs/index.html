<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Go-fastdfs | Anson 博客</title>
<link rel="shortcut icon" href="https://anson626.github.io/favicon.ico?v=1662522153730">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://anson626.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Go-fastdfs | Anson 博客 - Atom Feed" href="https://anson626.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="Go-fastdfs
参考影片
https://www.bilibili.com/video/BV1iE411H74W?p=3
https://sjqzhang.gitee.io/go-fastdfs/QA.html


Install g..." />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://anson626.github.io">
  <img class="avatar" src="https://anson626.github.io/images/avatar.png?v=1662522153730" alt="">
  </a>
  <h1 class="site-title">
    Anson 博客
  </h1>
  <p class="site-description">
    温故而知新
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
      
        <a href="https://anson626.github.io/post/mvn-ce-shi" class="menu">
          测试
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Go-fastdfs
            </h2>
            <div class="post-info">
              <span>
                2022-09-07
              </span>
              <span>
                3 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <p>Go-fastdfs</p>
<pre><code class="language-sh">参考影片
https://www.bilibili.com/video/BV1iE411H74W?p=3
https://sjqzhang.gitee.io/go-fastdfs/QA.html


Install go-fastdfs
wget --no-check-certificate https://github.com/sjqzhang/go-fastdfs/releases/download/v1.3.4/fileserver -O fileserver &amp;&amp; chmod +x fileserver &amp;&amp; ./fileserver

Configuration 
vim /data/apps/fastdfs/conf/cfg.json

&quot;The host address&quot;: &quot;The http address of the local machine is automatically generated by default (note that the port must be the same as the port in addr). It must be an internal network. If the automatic generation is not an internal network, please modify it by yourself, the same below&quot;,
&quot;host&quot;: &quot;http://192.168.75.5:8080&quot;,
&quot;Cluster &quot;: &quot;Cluster list, note that for high availability, the IP must not be the same, the same will not be automatically backed up, and it cannot be 127.0.0.1, and must be an intranet IP, which is automatically generated by default&quot;,
&quot;peers&quot;: [&quot;http://192.168.75.5:8080&quot;],

Access to pictures does not download, you need to modify the configuration
&quot;default_download&quot;: false,


访问图片不下载，需要修改一下配置
vim /data/apps/fastdfs/conf/cfg.json 

&quot;default_download&quot;: false,


如何后台运行程序？

下载链接: wget https://raw.githubusercontent.com/sjqzhang/go-fastdfs/master/control
请使用control 对程序进行后面运行，具体操作如下:
    一、 chmod +x control
    二、 确保control与fileserver在同一个目录
    三、 ./control start|stop|status #对和序进行启动，停止，查看状态等。

如何查看软件版本
从v1.2.9开始支持版本查看
命令：./fileserver -v

</code></pre>
<p>图片迁移</p>
<pre><code class="language-sh">从gofastdfs-node2 传送到新的服务器new-gofastdfs-node2
在新的服务器new-gofastdfs-node2执行这命令
rsync -azP -e 'ssh -p 15878' root@172.16.0.47:/data/apps/go-fastdfs/ /data/apps/go-fastdfs/


在这gofastdfs-node1执行 
rsync -azP /data/apps/go-fastdfs/ -e 'ssh -p 11618' root@172.16.0.122:/data/apps/go-fastdfs/
</code></pre>

              </div>
              <div class="toc-container">
                
              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://anson626.github.io/post/git/">
              <h3 class="post-title">
                Git
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: 'ef190ba3069867e097e9',
    clientSecret: '217834c2dd894cee427477d857fa91396b2842c4',
    repo: 'anson626.github.io',
    owner: 'anson626',
    admin: ['anson626'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Powered by <a href="https://anson626.github.io/" target="_blank">Anson 博客</a>
  <a class="rss" href="https://anson626.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
